{"remainingRequest":"C:\\Users\\G3-Cc\\Desktop\\Manage the project\\vue_manage\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\G3-Cc\\Desktop\\Manage the project\\vue_manage\\src\\components\\power\\Roles.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\G3-Cc\\Desktop\\Manage the project\\vue_manage\\src\\components\\power\\Roles.vue","mtime":1621269641807},{"path":"C:\\Users\\G3-Cc\\Desktop\\Manage the project\\vue_manage\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\G3-Cc\\Desktop\\Manage the project\\vue_manage\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\G3-Cc\\Desktop\\Manage the project\\vue_manage\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\G3-Cc\\Desktop\\Manage the project\\vue_manage\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhICgpIHsKICAgIHJldHVybiB7CiAgICAgIC8vIOaJgOacieinkuiJsuWIl+ihqAogICAgICByb2xlc0xpc3Q6IFtdLAogICAgICAvLyDliIbphY3mnYPpmZDmoYYKICAgICAgc2V0UmlnaHREaWFsb2dWaXNpYmxlOiBmYWxzZSwKICAgICAgLy8g5p2D6ZmQ5YiX6KGoCiAgICAgIHJpZ2h0c0xpc3Q6IFtdLAogICAgICAvLyAg5qCR5b2i5o6n5Lu255qE5bGe5oCn57uR5a6a5a+56LGhCiAgICAgIHRyZWVQcm9wczogewogICAgICAgIGxhYmVsOiAnYXV0aE5hbWUnLAogICAgICAgIGNoaWxkcmVuOiAnY2hpbGRyZW4nCiAgICAgIH0sCiAgICAgIC8vICAg6buY6K6k6YCJ5Lit6IqC54K5SUTlgLwKICAgICAgZGVmS2V5czogW10sCiAgICAgIC8vICAg5re75Yqg55So5oi35a+56K+d5qGGCiAgICAgIEFkZFJvbGVEaWFsb2dWaXNpYmxlOiBmYWxzZSwKICAgICAgLy8g5re75Yqg6KeS6Imy6KGo5Y2VCiAgICAgIGFkZFJvbGVGb3JtOiB7fSwKICAgICAgLy8gICDmt7vliqDop5LoibLooajljZXpqozor4EKICAgICAgYWRkUm9sZUZvcm1SdWxlczogewogICAgICAgIHJvbGVOYW1lOiBbCiAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+36L6T5YWl6KeS6Imy5ZCN56ewJywgdHJpZ2dlcjogJ2JsdXInIH0KICAgICAgICBdLAogICAgICAgIHJvbGVEZXNjOiBbCiAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+36L6T5YWl6KeS6Imy5o+P6L+wJywgdHJpZ2dlcjogJ2JsdXInIH0KICAgICAgICBdCiAgICAgIH0sCiAgICAgIC8vICAg57yW6L6R6KeS6Imy5L+h5oGvCiAgICAgIGVkaXRSb2xlRm9ybToge30sCiAgICAgIGVkaXRSb2xlRGlhbG9nVmlzaWJsZTogZmFsc2UsCiAgICAgIGVkaXRSb2xlRm9ybVJ1bGVzOiB7CiAgICAgICAgcm9sZU5hbWU6IFsKICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fovpPlhaXop5LoibLlkI3np7AnLCB0cmlnZ2VyOiAnYmx1cicgfQogICAgICAgIF0sCiAgICAgICAgcm9sZURlc2M6IFsKICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fovpPlhaXop5LoibLmj4/ov7AnLCB0cmlnZ2VyOiAnYmx1cicgfQogICAgICAgIF0KICAgICAgfSwKICAgICAgLy8gICDlvZPliY3ljbPlsIbliIbphY3mnYPpmZDnmoRJZAogICAgICByb2xlSWQ6IDAKICAgIH0KICB9LAogIGNyZWF0ZWQgKCkgewogICAgdGhpcy5nZXRSb2xlc0xpc3QoKQogIH0sCiAgbWV0aG9kczogewogICAgYXN5bmMgZ2V0Um9sZXNMaXN0ICgpIHsKICAgICAgY29uc3QgeyBkYXRhOiByZXMgfSA9IGF3YWl0IHRoaXMuJGh0dHAuZ2V0KCdyb2xlcycpCiAgICAgIGlmIChyZXMubWV0YS5zdGF0dXMgIT09IDIwMCkgewogICAgICAgIHJldHVybiB0aGlzLiRtZXNzYWdlLmVycm9yKCfojrflj5bop5LoibLliJfooajlpLHotKXvvIEnKQogICAgICB9CiAgICAgIHRoaXMucm9sZXNMaXN0ID0gcmVzLmRhdGEKICAgIH0sCiAgICAvLyDmoLnmja5JROWIoOmZpOWvueW6lOeahOadg+mZkAogICAgYXN5bmMgcmVtb3ZlUmlnaHRCeUlkIChyb2xlLCByaWdodElkKSB7CiAgICAgIC8vIOW8ueahhuaPkOekuiDliKDpmaQKICAgICAgY29uc3QgY29uZmlybVJlc3VsdCA9IGF3YWl0IHRoaXMuJGNvbmZpcm0oCiAgICAgICAgJ+atpOaTjeS9nOWwhuawuOS5heWIoOmZpOivpeadg+mZkCwg5piv5ZCm57un57utPycsCiAgICAgICAgJ+aPkOekuicsCiAgICAgICAgewogICAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICfnoa7lrponLAogICAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogJ+WPlua2iCcsCiAgICAgICAgICB0eXBlOiAnd2FybmluZycKICAgICAgICB9CiAgICAgICkuY2F0Y2goZXJyID0+IGVycikKICAgICAgLy8g54K55Ye756Gu5a6aIOi/lOWbnuWAvOS4uu+8mmNvbmZpcm0KICAgICAgLy8g54K55Ye75Y+W5raIIOi/lOWbnuWAvOS4uu+8miBjYW5jZWwKICAgICAgaWYgKGNvbmZpcm1SZXN1bHQgIT09ICdjb25maXJtJykgewogICAgICAgIHJldHVybiB0aGlzLiRtZXNzYWdlLmluZm8oJ+W3suWPlua2iOadg+mZkOWIoOmZpCcpCiAgICAgIH0KICAgICAgY29uc3QgeyBkYXRhOiByZXMgfSA9IGF3YWl0IHRoaXMuJGh0dHAuZGVsZXRlKAogICAgICAgIGByb2xlcy8ke3JvbGUuaWR9L3JpZ2h0cy8ke3JpZ2h0SWR9YAogICAgICApCiAgICAgIGlmIChyZXMubWV0YS5zdGF0dXMgIT09IDIwMCkgewogICAgICAgIHJldHVybiB0aGlzLiRtZXNzYWdlLmVycm9yKCfliKDpmaTmnYPpmZDlpLHotKXvvIEnKQogICAgICB9CiAgICAgIHJvbGUuY2hpbGRyZW4gPSByZXMuZGF0YQogICAgICAvLyAgIOS4jeW7uuiuruS9v+eUqAogICAgICAvLyB0aGlzLmdldFJvbGVzTGlzdCgpCiAgICB9LAogICAgLy8g5YiG6YWN5p2D6ZmQCiAgICBhc3luYyBzaG93U2V0UmlnaHREaWFsb2cgKHJvbGUpIHsKICAgICAgdGhpcy5yb2xlSWQgPSByb2xlLmlkCiAgICAgIC8vIOiOt+WPluinkuiJsueahOaJgOacieadg+mZkAogICAgICBjb25zdCB7IGRhdGE6IHJlcyB9ID0gYXdhaXQgdGhpcy4kaHR0cC5nZXQoJ3JpZ2h0cy90cmVlJykKICAgICAgaWYgKHJlcy5tZXRhLnN0YXR1cyAhPT0gMjAwKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+iOt+WPluadg+mZkOaVsOaNruWksei0pe+8gScpCiAgICAgIH0KICAgICAgLy8gICDojrflj5bmnYPpmZDmoJEKICAgICAgdGhpcy5yaWdodHNMaXN0ID0gcmVzLmRhdGEKICAgICAgLy8gICBjb25zb2xlLmxvZyhyZXMpCiAgICAgIC8vICAg6YCS5b2S6I635Y+W5LiJ57qn6IqC54K555qEaWQKICAgICAgdGhpcy5nZXRMZWFma2V5cyhyb2xlLCB0aGlzLmRlZktleXMpCgogICAgICB0aGlzLnNldFJpZ2h0RGlhbG9nVmlzaWJsZSA9IHRydWUKICAgIH0sCiAgICAvLyDpgJrov4fpgJLlvZIg6I635Y+W6KeS6Imy5LiL5LiJ57qn5p2D6ZmQ55qEIGlkLCDlubbkv53lrZjliLBkZWZLZXlz5pWw57uECiAgICBnZXRMZWFma2V5cyAobm9kZSwgYXJyKSB7CiAgICAgIC8vIOayoeaciWNoaWxkcmVu5bGe5oCn77yM5YiZ5piv5LiJ57qn6IqC54K5CiAgICAgIGlmICghbm9kZS5jaGlsZHJlbikgewogICAgICAgIHJldHVybiBhcnIucHVzaChub2RlLmlkKQogICAgICB9CiAgICAgIG5vZGUuY2hpbGRyZW4uZm9yRWFjaChpdGVtID0+IHRoaXMuZ2V0TGVhZmtleXMoaXRlbSwgYXJyKSkKICAgIH0sCiAgICAvLyDmnYPpmZDlr7nor53moYblhbPpl63kuovku7YKICAgIHNldFJpZ2h0RGlhbG9nQ2xvc2VkICgpIHsKICAgICAgdGhpcy5kZWZLZXlzID0gW10KICAgIH0sCiAgICAvLyDmt7vliqDop5LoibLlr7nor53moYbnmoTlhbPpl60KICAgIGFkZFJvbGVEaWFsb2dDbG9zZWQgKCkgewogICAgICB0aGlzLiRyZWZzLmFkZFJvbGVGb3JtUmVmLnJlc2V0RmllbGRzKCkKICAgIH0sCiAgICAvLyDmt7vliqDop5LoibIKICAgIGFkZFJvbGVzICgpIHsKICAgICAgdGhpcy4kcmVmcy5hZGRSb2xlRm9ybVJlZi52YWxpZGF0ZShhc3luYyB2YWxpZCA9PiB7CiAgICAgICAgaWYgKCF2YWxpZCkgcmV0dXJuCiAgICAgICAgY29uc3QgeyBkYXRhOiByZXMgfSA9IGF3YWl0IHRoaXMuJGh0dHAucG9zdCgncm9sZXMnLCB0aGlzLmFkZFJvbGVGb3JtKQogICAgICAgIGlmIChyZXMubWV0YS5zdGF0dXMgIT09IDIwMSkgewogICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign5re75Yqg6KeS6Imy5aSx6LSl77yBJykKICAgICAgICB9CiAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCfmt7vliqDop5LoibLmiJDlip/vvIEnKQogICAgICAgIHRoaXMuQWRkUm9sZURpYWxvZ1Zpc2libGUgPSBmYWxzZQogICAgICAgIHRoaXMuZ2V0Um9sZXNMaXN0KCkKICAgICAgfSkKICAgIH0sCiAgICAvLyDliKDpmaTop5LoibIKICAgIGFzeW5jIHJlbW92ZVJvbGVCeUlkIChpZCkgewogICAgICBjb25zdCBjb25maXJtUmVzdWx0ID0gYXdhaXQgdGhpcy4kY29uZmlybSgKICAgICAgICAn5q2k5pON5L2c5bCG5rC45LmF5Yig6Zmk6K+l6KeS6ImyLCDmmK/lkKbnu6fnu60/JywKICAgICAgICAn5o+Q56S6JywKICAgICAgICB7CiAgICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsCiAgICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJywKICAgICAgICAgIHR5cGU6ICd3YXJuaW5nJwogICAgICAgIH0KICAgICAgKS5jYXRjaChlcnIgPT4gZXJyKQogICAgICBpZiAoY29uZmlybVJlc3VsdCAhPT0gJ2NvbmZpcm0nKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuJG1lc3NhZ2UuaW5mbygn5bey5Y+W5raI5Yig6ZmkJykKICAgICAgfQogICAgICBjb25zdCB7IGRhdGE6IHJlcyB9ID0gYXdhaXQgdGhpcy4kaHR0cC5kZWxldGUoJ3JvbGVzLycgKyBpZCkKICAgICAgaWYgKHJlcy5tZXRhLnN0YXR1cyAhPT0gMjAwKSByZXR1cm4gdGhpcy4kbWVzc2FnZS5lcnJvcign5Yig6Zmk6KeS6Imy5aSx6LSl77yBJykKICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCfliKDpmaTnlKjmiLfmiJDlip/vvIEnKQogICAgICB0aGlzLmdldFJvbGVzTGlzdCgpCiAgICB9LAogICAgLy8g57yW6L6R6KeS6ImyCiAgICBhc3luYyBzaG93RWRpdERpYWxvZyAoaWQpIHsKICAgICAgY29uc3QgeyBkYXRhOiByZXMgfSA9IGF3YWl0IHRoaXMuJGh0dHAuZ2V0KCdyb2xlcy8nICsgaWQpCiAgICAgIGlmIChyZXMubWV0YS5zdGF0dXMgIT09IDIwMCkgcmV0dXJuIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+afpeivouinkuiJsuS/oeaBr+Wksei0pe+8gScpCiAgICAgIHRoaXMuZWRpdFJvbGVGb3JtID0gcmVzLmRhdGEKICAgICAgdGhpcy5lZGl0Um9sZURpYWxvZ1Zpc2libGUgPSB0cnVlCiAgICB9LAogICAgZWRpdFJvbGVzICgpIHsKICAgICAgdGhpcy4kcmVmcy5lZGl0Um9sZUZvcm1SZWYudmFsaWRhdGUoYXN5bmMgdmFsaWQgPT4gewogICAgICAgIC8vIGNvbnNvbGUubG9nKHZhbGlkKQogICAgICAgIC8vIOihqOWNlemihOagoemqjOWksei0pQogICAgICAgIGlmICghdmFsaWQpIHJldHVybgogICAgICAgIGNvbnN0IHsgZGF0YTogcmVzIH0gPSBhd2FpdCB0aGlzLiRodHRwLnB1dCgKICAgICAgICAgICdyb2xlcy8nICsgdGhpcy5lZGl0Um9sZUZvcm0ucm9sZUlkLAogICAgICAgICAgewogICAgICAgICAgICByb2xlTmFtZTogdGhpcy5lZGl0Um9sZUZvcm0ucm9sZU5hbWUsCiAgICAgICAgICAgIHJvbGVEZXNjOiB0aGlzLmVkaXRSb2xlRm9ybS5yb2xlRGVzYwogICAgICAgICAgfQogICAgICAgICkKICAgICAgICBpZiAocmVzLm1ldGEuc3RhdHVzICE9PSAyMDApIHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+abtOaWsOinkuiJsuS/oeaBr+Wksei0pe+8gScpCiAgICAgICAgfQogICAgICAgIC8vIOmakOiXj+e8lui+keinkuiJsuWvueivneahhgogICAgICAgIHRoaXMuZWRpdFJvbGVEaWFsb2dWaXNpYmxlID0gZmFsc2UKICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+abtOaWsOinkuiJsuS/oeaBr+aIkOWKn++8gScpCiAgICAgICAgdGhpcy5nZXRSb2xlc0xpc3QoKQogICAgICB9KQogICAgfSwKICAgIC8vIOWIhumFjeadg+mZkAogICAgYXN5bmMgYWxsb3RSaWdodHMgKHJvbGVJZCkgewogICAgICAvLyDojrflvpflvZPliY3pgInkuK3lkozljYrpgInkuK3nmoRJZAogICAgICBjb25zdCBrZXlzID0gWwogICAgICAgIC4uLnRoaXMuJHJlZnMudHJlZVJlZi5nZXRDaGVja2VkS2V5cygpLAogICAgICAgIC4uLnRoaXMuJHJlZnMudHJlZVJlZi5nZXRIYWxmQ2hlY2tlZEtleXMoKQogICAgICBdCiAgICAgIC8vIGpvaW4oKSDmlrnms5XnlKjkuo7miormlbDnu4TkuK3nmoTmiYDmnInlhYPntKDmlL7lhaXkuIDkuKrlrZfnrKbkuLIKICAgICAgY29uc3QgaWRTdHIgPSBrZXlzLmpvaW4oJywnKQogICAgICBjb25zdCB7IGRhdGE6IHJlcyB9ID0gYXdhaXQgdGhpcy4kaHR0cC5wb3N0KGByb2xlcy8ke3RoaXMucm9sZUlkfS9yaWdodHNgLCB7IHJpZHM6IGlkU3RyIH0pCiAgICAgIGlmIChyZXMubWV0YS5zdGF0dXMgIT09IDIwMCkgeyByZXR1cm4gdGhpcy4kbWVzc2FnZS5lcnJvcign5YiG6YWN5p2D6ZmQ5aSx6LSl77yBJykgfQogICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+WIhumFjeadg+mZkOaIkOWKnyEnKQogICAgICB0aGlzLmdldFJvbGVzTGlzdCgpCiAgICAgIHRoaXMuc2V0UmlnaHREaWFsb2dWaXNpYmxlID0gZmFsc2UKICAgIH0KICB9Cn0K"},{"version":3,"sources":["Roles.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Roles.vue","sourceRoot":"src/components/power","sourcesContent":["<template>\n  <div>\n    <!-- 面包屑导航区 -->\n    <el-breadcrumb separator-class=\"el-icon-arrow-right\">\n      <el-breadcrumb-item :to=\"{ path: '/home' }\">首页</el-breadcrumb-item>\n      <el-breadcrumb-item>权限管理</el-breadcrumb-item>\n      <el-breadcrumb-item>角色列表</el-breadcrumb-item>\n    </el-breadcrumb>\n    <!-- 卡片视图 -->\n    <el-card>\n      <!-- 添加角色按钮 -->\n      <el-row>\n        <el-col>\n          <el-button type=\"primary\" @click=\"AddRoleDialogVisible=true\">添加角色</el-button>\n        </el-col>\n      </el-row>\n      <!-- 角色列表 -->\n      <el-table :data=\"rolesList\" border stripe>\n        <!-- 展开列 -->\n        <el-table-column type=\"expand\">\n          <template slot-scope=\"scope\">\n            <el-row\n              :class=\"['bdbottom', i1 === 0 ? 'bdtop' : '', 'vcenter']\"\n              v-for=\"(item1, i1) in scope.row.children\"\n              :key=\"item1.id\"\n            >\n              <!-- 一级权限 -->\n              <el-col :span=\"5\">\n                <el-tag closable @close=\"removeRightById(scope.row, item1.id)\">{{ item1.authName}}</el-tag>\n                <i class=\"el-icon-caret-right\"></i>\n              </el-col>\n              <!-- 二级和三级 -->\n              <el-col :span=\"19\">\n                <!-- 通过for循环 渲染二级权限 -->\n                <el-row\n                  :class=\"[i2 === 0 ? '' : 'bdtop', 'vcenter']\"\n                  v-for=\"(item2, i2) in item1.children\"\n                  :key=\"item2.id\"\n                >\n                  <el-col :span=\"6 \">\n                    <el-tag\n                      type=\"success\"\n                      closable\n                      @close=\"removeRightById(scope.row, item2.id)\"\n                    >{{ item2.authName }}</el-tag>\n                    <i class=\"el-icon-caret-right\"></i>\n                  </el-col>\n                  <el-col :span=\"18\">\n                    <el-tag\n                      type=\"warning\"\n                      v-for=\"(item3) in item2.children\"\n                      :key=\"item3.id\"\n                      closable\n                      @close=\"removeRightById(scope.row, item3.id)\"\n                    >{{ item3.authName}}</el-tag>\n                  </el-col>\n                </el-row>\n              </el-col>\n            </el-row>\n          </template>\n        </el-table-column>\n        <!-- 索引列 -->\n        <el-table-column type=\"index\" label=\"#\"></el-table-column>\n        <el-table-column label=\"角色名称\" prop=\"roleName\"></el-table-column>\n        <el-table-column label=\"角色描述\" prop=\"roleDesc\"></el-table-column>\n        <el-table-column label=\"操作\" width=\"300px\">\n          <template slot-scope=\"scope\">\n            <el-button type=\"primary\" icon=\"el-icon-edit\" size=\"mini\" @click=\"showEditDialog(scope.row.id)\">编辑</el-button>\n            <el-button type=\"danger\" icon=\"el-icon-delete\" size=\"mini\" @click=\"removeRoleById(scope.row.id)\">删除</el-button>\n            <el-button\n              type=\"warning\"\n              icon=\"el-icon-setting\"\n              size=\"mini\"\n              @click=\"showSetRightDialog(scope.row)\"\n            >分配权限</el-button>\n          </template>\n        </el-table-column>\n      </el-table>\n    </el-card>\n    <!-- 分配权限 -->\n    <el-dialog\n      title=\"分配权限\"\n      :visible.sync=\"setRightDialogVisible\"\n      width=\"50%\"\n      @close=\"setRightDialogClosed\"\n    >\n      <el-tree\n        :data=\"rightsList\"\n        :props=\"treeProps\"\n        ref=\"treeRef\"\n        show-checkbox\n        node-key=\"id\"\n        default-expand-all\n        :default-checked-keys=\"defKeys\"\n      ></el-tree>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"setRightDialogVisible = false\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"allotRights\">确 定</el-button>\n      </span>\n    </el-dialog>\n    <!-- 添加角色对话框 -->\n    <el-dialog title=\"添加角色\" :visible.sync=\"AddRoleDialogVisible\" width=\"40%\" @close=\"addRoleDialogClosed\">\n      <el-form\n        :model=\"addRoleForm\"\n        ref=\"addRoleFormRef\"\n        :rules=\"addRoleFormRules\"\n        label-width=\"100px\"\n      >\n        <el-form-item label=\"角色名称\" prop=\"roleName\">\n          <el-input v-model=\"addRoleForm.roleName\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"角色描述\" prop=\"roleDesc\">\n          <el-input v-model=\"addRoleForm.roleDesc\"></el-input>\n        </el-form-item>\n      </el-form>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"AddRoleDialogVisible = false\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"addRoles\">确 定</el-button>\n      </span>\n    </el-dialog>\n    <!-- 编辑角色对话框 -->\n    <el-dialog title=\"编辑角色\" :visible.sync=\"editRoleDialogVisible\" width=\"40%\" @close=\"addRoleDialogClosed\">\n      <el-form\n        :model=\"editRoleForm\"\n        ref=\"editRoleFormRef\"\n        :rules=\"editRoleFormRules\"\n        label-width=\"100px\"\n      >\n        <el-form-item label=\"角色名称\" prop=\"roleName\">\n          <el-input v-model=\"editRoleForm.roleName\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"角色描述\" prop=\"roleDesc\">\n          <el-input v-model=\"editRoleForm.roleDesc\"></el-input>\n        </el-form-item>\n      </el-form>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"editRoleDialogVisible = false\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"editRoles\">确 定</el-button>\n      </span>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nexport default {\n  data () {\n    return {\n      // 所有角色列表\n      rolesList: [],\n      // 分配权限框\n      setRightDialogVisible: false,\n      // 权限列表\n      rightsList: [],\n      //  树形控件的属性绑定对象\n      treeProps: {\n        label: 'authName',\n        children: 'children'\n      },\n      //   默认选中节点ID值\n      defKeys: [],\n      //   添加用户对话框\n      AddRoleDialogVisible: false,\n      // 添加角色表单\n      addRoleForm: {},\n      //   添加角色表单验证\n      addRoleFormRules: {\n        roleName: [\n          { required: true, message: '请输入角色名称', trigger: 'blur' }\n        ],\n        roleDesc: [\n          { required: true, message: '请输入角色描述', trigger: 'blur' }\n        ]\n      },\n      //   编辑角色信息\n      editRoleForm: {},\n      editRoleDialogVisible: false,\n      editRoleFormRules: {\n        roleName: [\n          { required: true, message: '请输入角色名称', trigger: 'blur' }\n        ],\n        roleDesc: [\n          { required: true, message: '请输入角色描述', trigger: 'blur' }\n        ]\n      },\n      //   当前即将分配权限的Id\n      roleId: 0\n    }\n  },\n  created () {\n    this.getRolesList()\n  },\n  methods: {\n    async getRolesList () {\n      const { data: res } = await this.$http.get('roles')\n      if (res.meta.status !== 200) {\n        return this.$message.error('获取角色列表失败！')\n      }\n      this.rolesList = res.data\n    },\n    // 根据ID删除对应的权限\n    async removeRightById (role, rightId) {\n      // 弹框提示 删除\n      const confirmResult = await this.$confirm(\n        '此操作将永久删除该权限, 是否继续?',\n        '提示',\n        {\n          confirmButtonText: '确定',\n          cancelButtonText: '取消',\n          type: 'warning'\n        }\n      ).catch(err => err)\n      // 点击确定 返回值为：confirm\n      // 点击取消 返回值为： cancel\n      if (confirmResult !== 'confirm') {\n        return this.$message.info('已取消权限删除')\n      }\n      const { data: res } = await this.$http.delete(\n        `roles/${role.id}/rights/${rightId}`\n      )\n      if (res.meta.status !== 200) {\n        return this.$message.error('删除权限失败！')\n      }\n      role.children = res.data\n      //   不建议使用\n      // this.getRolesList()\n    },\n    // 分配权限\n    async showSetRightDialog (role) {\n      this.roleId = role.id\n      // 获取角色的所有权限\n      const { data: res } = await this.$http.get('rights/tree')\n      if (res.meta.status !== 200) {\n        return this.$message.error('获取权限数据失败！')\n      }\n      //   获取权限树\n      this.rightsList = res.data\n      //   console.log(res)\n      //   递归获取三级节点的id\n      this.getLeafkeys(role, this.defKeys)\n\n      this.setRightDialogVisible = true\n    },\n    // 通过递归 获取角色下三级权限的 id, 并保存到defKeys数组\n    getLeafkeys (node, arr) {\n      // 没有children属性，则是三级节点\n      if (!node.children) {\n        return arr.push(node.id)\n      }\n      node.children.forEach(item => this.getLeafkeys(item, arr))\n    },\n    // 权限对话框关闭事件\n    setRightDialogClosed () {\n      this.defKeys = []\n    },\n    // 添加角色对话框的关闭\n    addRoleDialogClosed () {\n      this.$refs.addRoleFormRef.resetFields()\n    },\n    // 添加角色\n    addRoles () {\n      this.$refs.addRoleFormRef.validate(async valid => {\n        if (!valid) return\n        const { data: res } = await this.$http.post('roles', this.addRoleForm)\n        if (res.meta.status !== 201) {\n          this.$message.error('添加角色失败！')\n        }\n        this.$message.success('添加角色成功！')\n        this.AddRoleDialogVisible = false\n        this.getRolesList()\n      })\n    },\n    // 删除角色\n    async removeRoleById (id) {\n      const confirmResult = await this.$confirm(\n        '此操作将永久删除该角色, 是否继续?',\n        '提示',\n        {\n          confirmButtonText: '确定',\n          cancelButtonText: '取消',\n          type: 'warning'\n        }\n      ).catch(err => err)\n      if (confirmResult !== 'confirm') {\n        return this.$message.info('已取消删除')\n      }\n      const { data: res } = await this.$http.delete('roles/' + id)\n      if (res.meta.status !== 200) return this.$message.error('删除角色失败！')\n      this.$message.success('删除用户成功！')\n      this.getRolesList()\n    },\n    // 编辑角色\n    async showEditDialog (id) {\n      const { data: res } = await this.$http.get('roles/' + id)\n      if (res.meta.status !== 200) return this.$message.error('查询角色信息失败！')\n      this.editRoleForm = res.data\n      this.editRoleDialogVisible = true\n    },\n    editRoles () {\n      this.$refs.editRoleFormRef.validate(async valid => {\n        // console.log(valid)\n        // 表单预校验失败\n        if (!valid) return\n        const { data: res } = await this.$http.put(\n          'roles/' + this.editRoleForm.roleId,\n          {\n            roleName: this.editRoleForm.roleName,\n            roleDesc: this.editRoleForm.roleDesc\n          }\n        )\n        if (res.meta.status !== 200) {\n          this.$message.error('更新角色信息失败！')\n        }\n        // 隐藏编辑角色对话框\n        this.editRoleDialogVisible = false\n        this.$message.success('更新角色信息成功！')\n        this.getRolesList()\n      })\n    },\n    // 分配权限\n    async allotRights (roleId) {\n      // 获得当前选中和半选中的Id\n      const keys = [\n        ...this.$refs.treeRef.getCheckedKeys(),\n        ...this.$refs.treeRef.getHalfCheckedKeys()\n      ]\n      // join() 方法用于把数组中的所有元素放入一个字符串\n      const idStr = keys.join(',')\n      const { data: res } = await this.$http.post(`roles/${this.roleId}/rights`, { rids: idStr })\n      if (res.meta.status !== 200) { return this.$message.error('分配权限失败！') }\n      this.$message.success('分配权限成功!')\n      this.getRolesList()\n      this.setRightDialogVisible = false\n    }\n  }\n}\n</script>\n\n<style Lang=\"less\" scoped>\n.el-tag {\n  margin: 7px;\n}\n.bdtop {\n  border-top: 1px solid #eee;\n}\n.bdbottom {\n  border-bottom: 1px solid #eee;\n}\n.vcenter {\n  display: flex;\n  align-items: center;\n}\n</style>\n"]}]}