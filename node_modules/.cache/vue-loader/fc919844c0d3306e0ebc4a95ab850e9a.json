{"remainingRequest":"C:\\Users\\G3-Cc\\Desktop\\Manage the project\\vue_manage\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\G3-Cc\\Desktop\\Manage the project\\vue_manage\\src\\components\\goods\\List.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\G3-Cc\\Desktop\\Manage the project\\vue_manage\\src\\components\\goods\\List.vue","mtime":1621274393045},{"path":"C:\\Users\\G3-Cc\\Desktop\\Manage the project\\vue_manage\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\G3-Cc\\Desktop\\Manage the project\\vue_manage\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\G3-Cc\\Desktop\\Manage the project\\vue_manage\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\G3-Cc\\Desktop\\Manage the project\\vue_manage\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhICgpIHsKICAgIHJldHVybiB7CiAgICAgIHF1ZXJ5SW5mbzogewogICAgICAgIHF1ZXJ5OiAnJywKICAgICAgICBwYWdlbnVtOiAxLAogICAgICAgIHBhZ2VzaXplOiAxMAogICAgICB9LAogICAgICAvLyDllYblk4HliJfooagKICAgICAgZ29vZHNMaXN0OiBbXSwKICAgICAgLy8g5ZWG5ZOB5oC75pWwCiAgICAgIHRvdGFsOiAwCiAgICB9CiAgfSwKICBjcmVhdGVkICgpIHsKICAgIHRoaXMuZ2V0R29vZHNMaXN0KCkKICB9LAogIG1ldGhvZHM6IHsKICAgIC8vIOagueaNruWIhumhteiOt+WPluWvueW6lOeahOWVhuWTgeWIl+ihqAogICAgYXN5bmMgZ2V0R29vZHNMaXN0ICgpIHsKICAgICAgY29uc3QgeyBkYXRhOiByZXMgfSA9IGF3YWl0IHRoaXMuJGh0dHAuZ2V0KCdnb29kcycsIHsKICAgICAgICBwYXJhbXM6IHRoaXMucXVlcnlJbmZvCiAgICAgIH0pCiAgICAgIGlmIChyZXMubWV0YS5zdGF0dXMgIT09IDIwMCkgewogICAgICAgIHJldHVybiB0aGlzLiRtZXNzYWdlLmVycm9yKCfojrflj5bllYblk4HliJfooajlpLHotKXvvIEnKQogICAgICB9CiAgICAgIHRoaXMuZ29vZHNMaXN0ID0gcmVzLmRhdGEuZ29vZHMKICAgICAgLy8gICBjb25zb2xlLmxvZyh0aGlzLmdvb2RzTGlzdCkKICAgICAgdGhpcy50b3RhbCA9IHJlcy5kYXRhLnRvdGFsCiAgICB9LAogICAgaGFuZGxlU2l6ZUNoYW5nZSAobmV3U2l6ZSkgewogICAgICB0aGlzLnF1ZXJ5SW5mby5wYWdlc2l6ZSA9IG5ld1NpemUKICAgICAgdGhpcy5nZXRHb29kc0xpc3QoKQogICAgfSwKICAgIGhhbmRsZUN1cnJlbnRDaGFuZ2UgKG5ld1NpemUpIHsKICAgICAgdGhpcy5xdWVyeUluZm8ucGFnZW51bSA9IG5ld1NpemUKICAgICAgdGhpcy5nZXRHb29kc0xpc3QoKQogICAgfSwKICAgIC8vIOmAmui/h0lk5Yig6Zmk5ZWG5ZOBCiAgICBhc3luYyByZW1vdmVCeUlkIChpZCkgewogICAgICBjb25zdCBjb25maXJtUmVzdWx0ID0gYXdhaXQgdGhpcy4kY29uZmlybSgKICAgICAgICAn5q2k5pON5L2c5bCG5rC45LmF5Yig6Zmk6K+l5ZWG5ZOBLCDmmK/lkKbnu6fnu60/JywKICAgICAgICAn5o+Q56S6JywKICAgICAgICB7CiAgICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsCiAgICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJywKICAgICAgICAgIHR5cGU6ICd3YXJuaW5nJwogICAgICAgIH0KICAgICAgKS5jYXRjaChlcnIgPT4gZXJyKQogICAgICBpZiAoY29uZmlybVJlc3VsdCAhPT0gJ2NvbmZpcm0nKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuJG1lc3NhZ2UuaW5mbygn5bey5Y+W5raI5Yig6Zmk77yBJykKICAgICAgfQogICAgICBjb25zdCB7IGRhdGE6IHJlcyB9ID0gYXdhaXQgdGhpcy4kaHR0cC5kZWxldGUoJ2dvb2RzLycgKyBpZCkKICAgICAgaWYgKHJlcy5tZXRhLnN0YXR1cyAhPT0gMjAwKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+WIoOmZpOWVhuWTgeWksei0pe+8gScpCiAgICAgIH0KICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCfliKDpmaTllYblk4HmiJDlip/vvIEnKQogICAgICB0aGlzLmdldEdvb2RzTGlzdCgpCiAgICB9LAogICAgZ29BZGRQYWdlICgpIHsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy9nb29kcy9hZGQnKQogICAgfQogIH0KfQo="},{"version":3,"sources":["List.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"List.vue","sourceRoot":"src/components/goods","sourcesContent":["<template>\n  <div>\n    <!-- 面包屑导航区 -->\n    <el-breadcrumb separator-class=\"el-icon-arrow-right\">\n      <el-breadcrumb-item :to=\"{ path: '/home' }\">首页</el-breadcrumb-item>\n      <el-breadcrumb-item>商品管理</el-breadcrumb-item>\n      <el-breadcrumb-item>商品列表</el-breadcrumb-item>\n    </el-breadcrumb>\n    <!-- 卡片视图 -->\n    <el-card>\n      <el-row :gutter=\"20\">\n        <el-col :span=\"6\">\n          <el-input placeholder=\"请输入内容\" v-model=\"queryInfo.query\" clearable @clear=\"getGoodsList\">\n            <el-button slot=\"append\" icon=\"el-icon-search\" @click=\"getGoodsList\"></el-button>\n          </el-input>\n        </el-col>\n        <el-col :span=\"4\">\n          <el-button type=\"primary\" @click=\"goAddPage\">添加商品</el-button>\n        </el-col>\n      </el-row>\n      <!-- 表格数据 -->\n      <el-table :data=\"goodsList\" border stripe>\n        <el-table-column type=\"index\"></el-table-column>\n        <el-table-column label=\"商品名称\" prop=\"goods_name\"></el-table-column>\n        <el-table-column label=\"商品价格(元)\" prop=\"goods_price\" width=\"100px\"></el-table-column>\n        <el-table-column label=\"商品重量\" prop=\"goods_weight\" width=\"70px\"></el-table-column>\n        <el-table-column label=\"商品数量\" prop=\"goods_number\" width=\"70px\"></el-table-column>\n        <el-table-column label=\"创建时间\" prop=\"add_time\" width=\"140px\">\n          <template slot-scope=\"scope\">{{scope.row.add_time | dataFormat }}</template>\n        </el-table-column>\n        <el-table-column label=\"操作\" width=\"130px\">\n          <template slot-scope=\"scope\">\n            <el-button type=\"primary\" icon=\"el-icon-edit\" size=\"mini\"></el-button>\n            <el-button\n              type=\"danger\"\n              icon=\"el-icon-delete\"\n              size=\"mini\"\n              @click=\"removeById(scope.row.goods_id)\"\n            ></el-button>\n          </template>\n        </el-table-column>\n      </el-table>\n      <!-- 分页区域 -->\n      <el-pagination\n        @size-change=\"handleSizeChange\"\n        @current-change=\"handleCurrentChange\"\n        :current-page=\"queryInfo.pagenum\"\n        :page-sizes=\"[5, 10, 15, 20]\"\n        :page-size=\"queryInfo.pagesize\"\n        layout=\"total, sizes, prev, pager, next, jumper\"\n        :total=\"total\"\n        background\n      ></el-pagination>\n    </el-card>\n  </div>\n</template>\n\n<script>\nexport default {\n  data () {\n    return {\n      queryInfo: {\n        query: '',\n        pagenum: 1,\n        pagesize: 10\n      },\n      // 商品列表\n      goodsList: [],\n      // 商品总数\n      total: 0\n    }\n  },\n  created () {\n    this.getGoodsList()\n  },\n  methods: {\n    // 根据分页获取对应的商品列表\n    async getGoodsList () {\n      const { data: res } = await this.$http.get('goods', {\n        params: this.queryInfo\n      })\n      if (res.meta.status !== 200) {\n        return this.$message.error('获取商品列表失败！')\n      }\n      this.goodsList = res.data.goods\n      //   console.log(this.goodsList)\n      this.total = res.data.total\n    },\n    handleSizeChange (newSize) {\n      this.queryInfo.pagesize = newSize\n      this.getGoodsList()\n    },\n    handleCurrentChange (newSize) {\n      this.queryInfo.pagenum = newSize\n      this.getGoodsList()\n    },\n    // 通过Id删除商品\n    async removeById (id) {\n      const confirmResult = await this.$confirm(\n        '此操作将永久删除该商品, 是否继续?',\n        '提示',\n        {\n          confirmButtonText: '确定',\n          cancelButtonText: '取消',\n          type: 'warning'\n        }\n      ).catch(err => err)\n      if (confirmResult !== 'confirm') {\n        return this.$message.info('已取消删除！')\n      }\n      const { data: res } = await this.$http.delete('goods/' + id)\n      if (res.meta.status !== 200) {\n        return this.$message.error('删除商品失败！')\n      }\n      this.$message.success('删除商品成功！')\n      this.getGoodsList()\n    },\n    goAddPage () {\n      this.$router.push('/goods/add')\n    }\n  }\n}\n</script>\n\n<style Lang=\"less\" scoped>\n</style>\n"]}]}